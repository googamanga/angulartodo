/*! angulartodo - v0.0.0 - 2013-10-12 */!function(exports,global){global["true"]=exports,angular.module("angulartodo",["ui.bootstrap","ngSanitize"]).run(["$rootScope",function($rootScope){$rootScope.$safeApply=function(fn){var phase=this.$root.$$phase;"$apply"==phase||"$digest"==phase?fn&&"function"==typeof fn&&fn():this.$apply(fn)}}]),angular.module("angulartodo").controller("todoController",["$scope","urlRegEx","$sce","$http",function($scope,urlRegEx,$sce,$http){var publicMembers=$scope,privateMembers={};privateMembers.index=0,privateMembers.taskFactory=function(text){var type;return urlRegEx.isYoutube(text)?(text=urlRegEx.getVideoId(text),type="youtube"):type=urlRegEx.isLink(text)?"link":"text",{id:privateMembers.index++,title:"",type:type,text:text,link:null,status:"active"}},publicMembers.task="",publicMembers.tasks=[],publicMembers.addTask=function(text){publicMembers.$safeApply(function(){var task,temp;publicMembers.tasks.unshift(privateMembers.taskFactory(text)),task=publicMembers.tasks[0],"youtube"==task.type&&$http.post("/youtubeInfo",{id:task.text}).then(function(response){response.data.entry&&(task.title=response.data.entry.title.$t)}),"link"==task.type&&(temp=task.text,task.text=null,$http.post("/linkInfo",{url:text}).then(function(response){var i;if(response.data){for(i=0;i<response.data.length;i++)"og:title"==response.data[i][0]&&(task.title=response.data[i][1]),"og:image"==response.data[i][0]&&(task.text=response.data[i][1]),"title"==response.data[i][0]&&(task.title=response.data[i][1]),"image"==response.data[i][0]&&(task.text=response.data[i][1]);task.text||(task.link=temp)}else task.link=temp})),publicMembers.task=""})},publicMembers.trustedSource=function(source){return $sce.trustAsResourceUrl(source)},publicMembers.deleteTask=function(id){var i;for(i=0;i<publicMembers.tasks.length;i++)publicMembers.tasks[i].id==id&&publicMembers.tasks.splice(i,1)}}]),angular.module("angulartodo").factory("urlRegEx",[function(){return{getVideoId:function(string){return string.match(/.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/)[1]},isYoutube:function(string){return/^(http|https):\/\/+(www.youtube.com\/watch\?v=|www.youtu.be\/|www.youtube.com\/embed\/)+\w{11}/.test(string)},isLink:function(string){return/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/.test(string)}}}]),angular.module("angulartodo").run(["$templateCache",function($templateCache){$templateCache.put("index.html",'<!doctype html><html lang="en" ng-app="angulartodo"><head><meta charset="utf-8"><title>TodoMVC</title><script src="vendor.js"></script><script src="app.js"></script><link rel="stylesheet" href="app.css"></head><body><nav class="navbar navbar-inverse navbar-static-top"><a href="" class="navbar-brand">Angular TodoMVC</a></nav><div class="root-content-margin-box" ng-controller="todoController"><div class="root-content-border-box"><div class="root-content-padding-box"><div class="root-content-content-box"><form role="form" ng-submit="addTask(task);"><div class="form-group"><input type="text" class="form-control" placeholder="Enter a task" ng-model="task"></div></form><div class="container-fluid"><div class="row well" ng-repeat="task in tasks"><div class="col-md-1"><button class="btn btn-primary" ng-click="task.status = \'done\'">Done!</button></div><div class="col-md-10" ng-class="{done: (task.status == \'done\')}"><ng-include ng-if="task.type == \'youtube\'" src="\'partials/youtube.html\'"></ng-include><ng-include ng-if="task.type == \'link\'" src="\'partials/link.html\'"></ng-include><ng-include ng-if="task.type == \'text\'" src="\'partials/text.html\'"></ng-include></div><div class="col-md-1"><button class="btn btn-warning" ng-click="deleteTask(task.id)">Delete</button></div></div></div></div></div></div></div></body></html>'),$templateCache.put("partials/link.html",'<img ng-show="!task.text && !task.link" src="images/loader.gif" alt="Loading..."><div><strong ng-show="task.title">{{task.title}}</strong></div><a href="{{task.link}}" ng-show="task.link">{{task.link}}</a><img ng-show="task.text" ng-src="{{task.text}}" alt="Image could not be loaded">'),$templateCache.put("partials/text.html","{{task.text}}"),$templateCache.put("partials/youtube.html",'<div><strong>{{task.title || ""}}</strong></div><iframe class="youtube-player" type="text/html" width="640" height="385" ng-src="{{trustedSource(\'//www.youtube.com/embed/\'+task.text)}}" allowfullscreen="" frameborder="0"></iframe>')}])}({},function(){return this}());
//# sourceMappingURL=app.map